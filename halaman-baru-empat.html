<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selamat Datang di Dunia 3D</title>
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Three.js for 3D graphics -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Google Fonts: Inter and Orbitron -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Orbitron:wght@900&display=swap" rel="stylesheet">
    <!-- Icon Library for External Link Icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Set default font and background */
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #f0f0f0;
            overflow: hidden; 
            cursor: none; /* Sembunyikan kursor asli untuk animasi ular */
        }
        /* --- Menerapkan Font Orbitron pada Judul --- */
        #hero-section h1 {
            font-family: 'Orbitron', sans-serif;
        }
        /* --- Style untuk Canvas Animasi --- */
        .background-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        /* Canvas ular harus di atas canvas 3D */
        #snake-canvas {
            z-index: -0; 
            pointer-events: none; /* Agar tidak menghalangi interaksi mouse */
        }
        /* Style untuk kursor custom */
        .custom-cursor {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(0, 221, 255, 0.7);
            position: absolute;
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: width 0.2s, height 0.2s, box-shadow 0.2s;
            z-index: 1000; /* Pastikan kursor di paling depan */
            box-shadow: 0 0 15px rgba(0, 221, 255, 0.8);
        }
        /* Add a dark gradient effect to the background for better text readability */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(10, 10, 10, 0.6) 0%, rgba(10, 10, 10, 0.9) 70%, #0a0a0a 100%);
            z-index: 0;
        }
        /* Main content on top of the overlay */
        .content-wrapper {
            position: relative;
            z-index: 1;
            overflow-x: hidden;
            overflow-y: auto;
            height: 100vh;
        }
        /* Style for navigation menu */
        header nav a {
            position: relative;
            transition: color 0.3s ease;
        }
        header nav a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #00ddff;
            transition: width 0.3s ease;
        }
        header nav a:hover {
            color: #00ddff;
        }
        header nav a:hover::after {
            width: 100%;
        }

        /* --- CSS FOR HERO AND TITLES --- */
        .animated-gradient-text {
            background: linear-gradient(90deg, #00ddff, #ff00ff, #00ddff);
            background-size: 200% auto;
            color: #fff;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-flow 5s linear infinite;
        }

        @keyframes gradient-flow {
            to {
                background-position: 200% center;
            }
        }

        .pulsing-button {
            animation: pulse-glow 2s infinite ease-in-out;
        }

        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(0, 221, 255, 0.4), 0 0 0px rgba(0,0,0,0);
            }
            50% {
                box-shadow: 0 0 35px rgba(0, 221, 255, 0.8), 0 0 0px rgba(0,0,0,0);
            }
        }
        
        /* --- CSS FOR TIMELINE --- */
        .timeline-card {
            transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
        }
        .timeline-card:hover {
            transform: scale(1.03);
            box-shadow: 0 0 25px rgba(0, 221, 255, 0.3);
        }
        .reveal-on-scroll {
            opacity: 0;
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .right-timeline.reveal-on-scroll {
            transform: translateX(50px);
        }
        .left-timeline.reveal-on-scroll {
            transform: translateX(-50px);
        }
        .reveal-on-scroll.visible {
            opacity: 1;
            transform: translateX(0);
        }

        /* --- CSS FOR FADE-IN CONTENT (ABOUT, PROJECTS, CONTACT) --- */
        .content-entry-box.visible {
            opacity: 0;
            animation: slideUp 0.6s 0.4s ease-out forwards;
        }
        @keyframes slideUp {
            from { transform: translateY(40px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .content-entry-box.visible > * {
            opacity: 0;
            animation: fadeInItem 0.5s ease-out forwards;
        }
        .content-entry-box.visible > *:nth-child(1) { animation-delay: 0.8s; }
        .content-entry-box.visible > *:nth-child(2) { animation-delay: 0.9s; }
        .content-entry-box.visible > *:nth-child(3) { animation-delay: 1.0s; }
        .content-entry-box.visible > *:nth-child(4) { animation-delay: 1.1s; }
        .content-entry-box.visible > *:nth-child(5) { animation-delay: 1.2s; }
        .content-entry-box.visible > *:nth-child(6) { animation-delay: 1.3s; }
        @keyframes fadeInItem {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Animation for hamburger button */
        .hamburger div {
            transition: all 0.3s ease;
        }
        .hamburger.open .top {
            transform: rotate(-45deg) translate(-5px, 6px);
        }
        .hamburger.open .middle {
            opacity: 0;
        }
        .hamburger.open .bottom {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        /* Page Fade In/Out Animation */
        .fade-out {
            animation: fadeOut 0.3s forwards;
        }
        .fade-in {
            animation: fadeIn 0.5s 0.3s forwards;
            opacity: 0;
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* PROJECT CARD EFFECTS */
        .project-card {
            transform-style: preserve-3d;
            transition: transform 0.2s ease-out;
            cursor: pointer;
        }
        .project-card-wrapper {
            transition: filter 0.3s ease-out, opacity 0.3s ease-out;
        }
        #project-section.has-focus .project-card-wrapper:not(.focused) {
            filter: blur(4px);
            opacity: 0.5;
            pointer-events: none;
        }
        #project-section.has-focus .project-card-wrapper.focused {
            pointer-events: auto;
        }
        .project-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
                rgba(255, 255, 255, 0.15) 0%,
                rgba(255, 255, 255, 0) 50%
            );
            opacity: var(--glare-opacity, 0);
            transition: opacity 0.2s ease-out;
            pointer-events: none;
        }
        #project-grid .project-card-wrapper {
            opacity: 0;
            transform: translateY(50px);
            animation: slideInUp 0.6s ease-out forwards;
        }
        #project-grid.visible .project-card-wrapper:nth-child(1) { animation-delay: 0.4s; }
        #project-grid.visible .project-card-wrapper:nth-child(2) { animation-delay: 0.6s; }
        #project-grid.visible .project-card-wrapper:nth-child(3) { animation-delay: 0.8s; }
        #project-grid.visible .project-card-wrapper:nth-child(4) { animation-delay: 1.0s; }
        @keyframes slideInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- STYLING UNTUK MODAL (PROYEK & BAHASA) --- */
        .modal {
            z-index: 100;
        }
        .modal-content {
            max-height: 90vh;
        }
        .modal-enter .modal-content {
            animation: modal-enter-anim 0.3s ease-out forwards;
        }
        .modal-leave .modal-content {
            animation: modal-leave-anim 0.3s ease-out forwards;
        }
        @keyframes modal-enter-anim {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes modal-leave-anim {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }

    </style>
</head>
<body class="w-full">

    <!-- Canvas for 3D Background -->
    <canvas id="bg-canvas" class="background-canvas"></canvas>
    <canvas id="snake-canvas" class="background-canvas"></canvas>
    
    <div class="overlay"></div>
    <div class="custom-cursor"></div>

    <!-- Wrapper for all page content -->
    <div class="content-wrapper">

        <!-- Header and Navigation -->
        <header class="fixed top-0 left-0 right-0 p-4 sm:p-6 z-50">
            <div class="container mx-auto flex justify-end items-center">
                 <!-- Language Switcher -->
                <button id="lang-switcher-btn" class="text-white border border-white rounded-full px-3 py-1 text-sm mr-4 md:mr-8 hover:bg-white hover:text-black transition-colors focus:outline-none" aria-label="Ganti Bahasa">
                    ID
                </button>
                 <!-- Navigation for Desktop -->
                <nav class="hidden md:flex space-x-8 text-white">
                    <a href="#hero-section" data-translate-key="navHome">Beranda</a>
                    <a href="#about-section" data-translate-key="navAbout">Tentang Saya</a>
                    <a href="#project-section" data-translate-key="navProjects">Proyek</a>
                    <a href="#contact-section" data-translate-key="navContact">Kontak</a>
                </nav>

                <!-- Hamburger Button for Mobile -->
                <button id="hamburger-button" class="md:hidden z-50 space-y-1.5 cursor-pointer" aria-label="Buka Menu" aria-expanded="false">
                    <div class="top w-6 h-0.5 bg-white"></div>
                    <div class="middle w-6 h-0.5 bg-white"></div>
                    <div class="bottom w-6 h-0.5 bg-white"></div>
                </button>
            </div>
        </header>
        
        <!-- Mobile Navigation Menu (appears on hamburger click) -->
        <div id="mobile-menu" class="fixed top-0 left-0 w-full h-full bg-black/90 backdrop-blur-sm flex-col items-center justify-center text-2xl space-y-8 text-white z-40 hidden">
            <a href="#hero-section" class="mobile-link" data-translate-key="navHome">Beranda</a>
            <a href="#about-section" class="mobile-link" data-translate-key="navAbout">Tentang Saya</a>
            <a href="#project-section" class="mobile-link" data-translate-key="navProjects">Proyek</a>
            <a href="#contact-section" class="mobile-link" data-translate-key="navContact">Kontak</a>
        </div>


        <!-- Home Section: Main Content -->
        <div id="home-view">
            <main id="hero-section" class="container relative mx-auto px-4 h-screen flex flex-col items-center justify-center">
                <div class="text-center">
                    <h1 class="animated-gradient-text text-4xl md:text-5xl lg:text-8xl font-black leading-tight mb-16" data-translate-key="heroTitle">
                        Dimensi Baru, Kisah Pribadi Saya
                    </h1>
                    <a href="#timeline-section" class="pulsing-button bg-cyan-500 hover:bg-cyan-400 text-black font-bold py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105" data-translate-key="heroButton">
                        Mulai Petualangan
                    </a>
                </div>
                <p class="absolute bottom-12 left-0 right-0 px-4 text-gray-400 text-center text-lg italic max-w-2xl mx-auto" data-translate-key="heroQuote">"Jadilah pribadi cerdas yang mencerahkan, pintar yang membagikan ilmu, dan jenius yang mengilhami perubahan."</p>
            </main>

            <!-- Life Journey Timeline Section -->
            <section id="timeline-section" class="container mx-auto px-4 py-20">
                <div class="w-full max-w-3xl mx-auto">
                    <h2 class="animated-gradient-text text-3xl md:text-5xl font-black text-center mb-16" data-translate-key="timelineTitle">
                        Perjalanan Hidup Saya
                    </h2>
                    <div class="relative wrap overflow-hidden p-10 h-full">
                        <div class="border-2-2 absolute border-opacity-20 border-cyan-700 h-full border" style="left: 50%"></div>
                        <!-- Timeline Item 1 -->
                        <div class="mb-8 flex justify-between items-center w-full right-timeline reveal-on-scroll">
                            <div class="order-1 w-5/12"></div>
                            <div class="z-20 flex items-center order-1 bg-cyan-800 shadow-xl w-8 h-8 rounded-full">
                                <h1 class="mx-auto font-semibold text-sm text-white" data-translate-key="sdAbbr">SD</h1>
                            </div>
                            <div class="order-1 bg-gray-800/60 backdrop-blur-sm rounded-lg shadow-xl w-5/12 px-6 py-4 timeline-card">
                                <h3 class="mb-1 font-bold text-cyan-400 text-xl" data-translate-key="sdTitle">Sekolah Dasar</h3>
                                <p class="text-sm font-medium text-gray-400 mb-2">MIS Manbaul Huda | 2015 - 2021</p>
                                <p class="text-sm leading-snug tracking-wide text-gray-300" data-translate-key="sdDesc">Merupakan awal dari segalanya. Di sini saya belajar membaca, menulis, dan bertemu dengan teman-teman pertama yang tak terlupakan.</p>
                            </div>
                        </div>
                        <!-- Timeline Item 2 -->
                        <div class="mb-8 flex justify-between flex-row-reverse items-center w-full left-timeline reveal-on-scroll">
                            <div class="order-1 w-5/12"></div>
                            <div class="z-20 flex items-center order-1 bg-cyan-800 shadow-xl w-8 h-8 rounded-full">
                                <h1 class="mx-auto text-white font-semibold text-sm" data-translate-key="smpAbbr">SMP</h1>
                            </div>
                            <div class="order-1 bg-gray-800/60 backdrop-blur-sm rounded-lg shadow-xl w-5/12 px-6 py-4 timeline-card">
                                <h3 class="mb-1 font-bold text-cyan-400 text-xl" data-translate-key="smpTitle">Sekolah Menengah Pertama</h3>
                                <p class="text-sm font-medium text-gray-400 mb-2">SMPN 01 WIRADESA | 2021 - 2023</p>
                                <p class="text-sm leading-snug tracking-wide text-gray-300" data-translate-key="smpDesc">Pada jenjang ini, saya memasuki masa remaja, mulai mencari jati diri, dan belajar memahami pelajaran yang lebih kompleks.</p>
                            </div>
                        </div>
                        <!-- Timeline Item 3 -->
                        <div class="mb-8 flex justify-between items-center w-full right-timeline reveal-on-scroll">
                            <div class="order-1 w-5/12"></div>
                            <div class="z-20 flex items-center order-1 bg-cyan-800 shadow-xl w-8 h-8 rounded-full">
                                <h1 class="mx-auto font-semibold text-sm text-white" data-translate-key="smkAbbr">SMK</h1>
                            </div>
                            <div class="order-1 bg-gray-800/60 backdrop-blur-sm rounded-lg shadow-xl w-5/12 px-6 py-4 timeline-card">
                                <h3 class="mb-1 font-bold text-cyan-400 text-xl" data-translate-key="smkTitle">Sekolah Menengah Kejuruan</h3>
                                <p class="text-sm font-medium text-gray-400 mb-2">SMK MA'ARIF NU TIRTO</p>
                                <p class="text-sm leading-snug tracking-wide text-gray-300" data-translate-key="smkDesc">Di sini saya fokus pada keahlian, mempersiapkan diri untuk dunia kerja, serta menciptakan kenangan indah di akhir masa sekolah.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- About Me Section -->
        <section id="about-section" class="container mx-auto px-4 min-h-screen hidden items-center justify-center py-20">
            <div class="w-full max-w-3xl">
                <h2 class="animated-gradient-text text-3xl md:text-5xl font-black text-center mb-12" data-translate-key="aboutTitle">Tentang Saya</h2>
                <div class="bg-gray-800/60 backdrop-blur-sm rounded-lg p-8 text-left content-entry-box">
                    <h3 class="text-2xl font-bold text-cyan-400 mb-4" data-translate-key="bioTitle">Data Diri</h3>
                    <div class="grid grid-cols-[max-content,max-content,1fr] gap-x-2 gap-y-2 text-gray-300">
                        <strong data-translate-key="bioName" class="font-bold">Nama</strong>
                        <span>:</span>
                        <span>Ahmad Sabilul Khoil</span>
                        
                        <strong data-translate-key="bioDob" class="font-bold">Tempat, Tanggal Lahir</strong>
                        <span>:</span>
                        <span>Pekalongan, 10 Januari 2008</span>
                        
                        <strong data-translate-key="bioAddress" class="font-bold">Alamat</strong>
                        <span>:</span>
                        <span>Jalan Raya Pantura No 186, Sasem, Kampil, Wiradesa, Pekalongan</span>
                        
                        <strong data-translate-key="bioReligion" class="font-bold">Agama</strong>
                        <span>:</span>
                        <span>Islam</span>
                    </div>

                    <h3 class="text-2xl font-bold text-cyan-400 mt-8 mb-4" data-translate-key="eduTitle">Riwayat Pendidikan</h3>
                    <ul class="list-none space-y-2 text-gray-300">
                        <li><strong>MI Gumawang</strong> (2015 - 2021)</li>
                        <li><strong>SMPN 01 Wiradesa</strong> (2021-2023)</li>
                        <li data-translate-key="eduSmk"><strong>SMK Ma'arif NU Tirto</strong>, Jurusan Teknik Jaringan Komputer</li>
                    </ul>
                    <h3 class="text-2xl font-bold text-cyan-400 mt-8 mb-4" data-translate-key="expTitle">Pengalaman dan Minat</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-300">
                        <li data-translate-key="exp1">Mendalami pendidikan agama Islam serta nilai-nilai kedisiplinan sejak jenjang MI</li>
                        <li data-translate-key="exp2">Mempelajari tentang toleransi antaragama pada jenjang SMP</li>
                        <li data-translate-key="exp3">Memfokuskan diri pada bidang teknik jaringan komputer</li>
                        <li data-translate-key="exp4">Memiliki hobi membuat video presentasi dan mengedit poster</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="project-section" class="container mx-auto px-4 min-h-screen hidden items-center justify-center py-20">
            <div class="w-full max-w-5xl">
                <h2 class="animated-gradient-text text-3xl md:text-5xl font-black text-center mb-16" data-translate-key="projectsTitle">
                    Proyek Saya
                </h2>
                <!-- Grid untuk proyek akan diisi oleh JavaScript -->
                <div id="project-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            </div>
        </section>

        <!-- Contact Section with Animation -->
        <section id="contact-section" class="container mx-auto px-4 min-h-screen hidden items-center justify-center py-20">
            <div id="contact-ui" class="w-full max-w-2xl text-center content-entry-box">
                <h2 class="animated-gradient-text text-3xl md:text-5xl font-black text-center mb-12" data-translate-key="contactTitle">Animasi 3D</h2>
                <p class="text-gray-300 mb-8" data-translate-key="contactDesc">
                    Halaman ini sedang dalam pengembangan
                </p>
            </div>
        </section>
        
        <!-- Footer -->
        <footer class="text-center py-16 px-4">
            <blockquote class="max-w-3xl mx-auto">
                <p class="text-lg italic text-gray-300" data-translate-key="footerQuote">
                    “Sesungguhnya Allah tidak akan mengubah keadaan suatu kaum sebelum mereka mengubah keadaan diri mereka sendiri”
                </p>
                <cite class="block text-cyan-400 mt-4 not-italic" data-translate-key="footerCite">— QS Ar-Ra’d: 11</cite>
            </blockquote>
        </footer>
    </div>

    <!-- Project Modal -->
    <div id="project-modal" class="modal fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content bg-gray-900/80 border border-gray-700 rounded-lg shadow-xl w-full max-w-4xl relative overflow-y-auto">
            <button id="modal-close-btn" class="absolute top-3 right-3 text-gray-400 hover:text-white transition-colors" aria-label="Tutup Modal">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div class="p-6 md:p-8">
                <h2 id="modal-title" class="text-3xl font-black text-cyan-400 mb-4"></h2>
                <div id="modal-media" class="mb-6 rounded-lg overflow-hidden bg-black aspect-video"></div>
                <p id="modal-desc" class="text-gray-300 leading-relaxed"></p>
            </div>
        </div>
    </div>
    
    <!-- Language Selection Modal -->
    <div id="lang-modal" class="modal fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 hidden" role="dialog" aria-modal="true" aria-labelledby="lang-modal-title-static">
        <div class="modal-content bg-gray-900/80 border border-gray-700 rounded-lg shadow-xl w-full max-w-sm relative text-center p-8">
            <h2 id="lang-modal-title-static" class="text-2xl font-bold text-cyan-400 mb-6" data-translate-key="langModalTitle">Pilih Bahasa</h2>
             <div class="flex flex-col space-y-4">
                <button id="lang-select-id" class="w-full bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                    Bahasa Indonesia
                </button>
                <button id="lang-select-en" class="w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                    English
                </button>
                <button id="lang-select-jv" class="w-full bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                    Basa Jawi
                </button>
            </div>
        </div>
    </div>


    <script>
        // --- PUSAT DATA APLIKASI ---
        const appData = {
            projects: [
                { id: 'proj1', img: 'https://placehold.co/600x400/00ddff/0a0a0a?text=Proyek+1', modalImg: 'https://placehold.co/1280x720/1a1a1a/00ddff?text=PC+Gaming', videoUrl: 'https://www.w3schools.com/html/mov_bbb.mp4', isExternal: false, externalUrl: '' },
                { id: 'proj2', img: 'https://placehold.co/600x400/00ddff/0a0a0a?text=Proyek+2', modalImg: 'https://placehold.co/1280x720/1a1a1a/00ddff?text=Jaringan+Lab', videoUrl: '', isExternal: false, externalUrl: '' },
                { id: 'proj3', img: 'https://placehold.co/600x400/00ddff/0a0a0a?text=Proyek+3', modalImg: 'https://placehold.co/1280x720/1a1a1a/00ddff?text=Website+3D', videoUrl: '', isExternal: false, externalUrl: '' },
                { id: 'proj4', img: 'https://placehold.co/600x400/00ddff/0a0a0a?text=Proyek+MTK', modalImg: '', videoUrl: '', isExternal: true, externalUrl: './halaman.proyek-MTK.html' }
            ],
            translations: {
                pageTitle: { id: 'Selamat Datang di Dunia 3D', en: 'Welcome to the 3D World', jv: 'Sugeng Rawuh ing Jagad 3D' },
                navHome: { id: 'Beranda', en: 'Home', jv: 'Wiwitan' },
                navAbout: { id: 'Tentang Saya', en: 'About Me', jv: 'Bab Kula' },
                navProjects: { id: 'Proyek', en: 'Projects', jv: 'Ayahan Kula' },
                navContact: { id: 'Kontak', en: 'Contact', jv: 'Sambetan' },
                heroTitle: { id: 'Dimensi Baru, Kisah Pribadi Saya', en: 'New Dimensions, My Personal Story', jv: 'Dimensi Enggal, Cariyos Pribadi Kula' },
                heroButton: { id: 'Mulai Petualangan', en: 'Start the Adventure', jv: 'Miwiti Lelampahan' },
                heroQuote: { id: '"Jadilah pribadi cerdas yang mencerahkan, pintar yang membagikan ilmu, dan jenius yang mengilhami perubahan."', en: '"Be the smart one who enlightens, the clever one who shares knowledge, and the genius who inspires change."', jv: '"Dadosa tiyang pinter ingkang madhangi, tiyang wasis ingkang ngedum ngelmu, lan tiyang jenius ingkang nginspirasi ewah-ewahan."' },
                timelineTitle: { id: 'Perjalanan Hidup Saya', en: 'My Life\'s Journey', jv: 'Lelampahan Gesang Kula' },
                sdAbbr: { id: 'SD', en: 'ES', jv: 'SD' },
                sdTitle: { id: 'Sekolah Dasar', en: 'Elementary School', jv: 'Sekolah Dhasar' },
                sdDesc: { id: 'Merupakan awal dari segalanya. Di sini saya belajar membaca, menulis, dan bertemu dengan teman-teman pertama yang tak terlupakan.', en: 'The beginning of everything. Learning to read, write, and meeting unforgettable first friends.', jv: 'Wiwitaning sedaya. Sinau maos, nyerat, lan kepanggih rencang-rencang kapisan ingkang mboten saged dipunsupekaken.' },
                smpAbbr: { id: 'SMP', en: 'JHS', jv: 'SMP' },
                smpTitle: { id: 'Sekolah Menengah Pertama', en: 'Junior High School', jv: 'Sekolah Menengah Pertama' },
                smpDesc: { id: 'Pada jenjang ini, saya memasuki masa remaja, mulai mencari jati diri, dan belajar memahami pelajaran yang lebih kompleks.', en: 'Entering adolescence, searching for identity, and starting to understand more complex subjects.', jv: 'Mlebet ing mangsa remaja, madosi jatidhiri, lan wiwit mangertosi piwulangan ingkang langkung rumit.' },
                smkAbbr: { id: 'SMK', en: 'VHS', jv: 'SMK' },
                smkTitle: { id: 'Sekolah Menengah Kejuruan', en: 'Vocational High School', jv: 'Sekolah Menengah Kejuruan' },
                smkDesc: { id: 'Di sini saya fokus pada keahlian, mempersiapkan diri untuk dunia kerja, serta menciptakan kenangan indah di akhir masa sekolah.', en: 'Focusing on skills, preparing for the world of work, and creating beautiful memories at the end of school.', jv: 'Fokus dhateng keahlian, nyawisaken dhiri kagem jagad pakaryan, lan ngripta kenangan endah ing pungkasaning mangsa sekolah.' },
                aboutTitle: { id: 'Tentang Saya', en: 'About Me', jv: 'Babagan Kula' },
                bioTitle: { id: 'Data Diri', en: 'Personal Data', jv: 'Dhata Pribadi' },
                bioName: { id: 'Nama', en: 'Name', jv: 'Asma' },
                bioDob: { id: 'Tempat, Tanggal Lahir', en: 'Place, Date of Birth', jv: 'Papan, Wanci Lair' },
                bioAddress: { id: 'Alamat', en: 'Address', jv: 'Papan Dunung' },
                bioReligion: { id: 'Agama', en: 'Religion', jv: 'Agami' },
                eduTitle: { id: 'Riwayat Pendidikan', en: 'Education History', jv: 'Riwayat Pawiyatan' },
                eduSmk: { id: "<strong>SMK Ma'arif NU Tirto</strong>, Jurusan Teknik Jaringan Komputer", en: "<strong>SMK Ma'arif NU Tirto</strong>, Major in Computer Network Engineering", jv: "<strong>SMK Ma'arif NU Tirto</strong>, Jurusan Teknik Jaringan Komputer" },
                expTitle: { id: 'Pengalaman dan Minat', en: 'Experience and Interests', jv: 'Patemon lan Kesenengan' },
                exp1: { id: 'Mendalami pendidikan agama Islam serta nilai-nilai kedisiplinan sejak jenjang MI', en: 'Deepening Islamic religious education and disciplinary values since elementary school', jv: 'Nglampahi pendidikan agami Islam lan nilai-nilai disiplin wiwit MI' },
                exp2: { id: 'Mempelajari tentang toleransi antaragama pada jenjang SMP', en: 'Learning about inter-religious tolerance in junior high', jv: 'Sinau toleransi antaragami wonten ing SMP' },
                exp3: { id: 'Memfokuskan diri pada bidang teknik jaringan komputer', en: 'Focusing on the field of computer network engineering', jv: 'Fokus ing babagan teknik jaringan komputer' },
                exp4: { id: 'Memiliki hobi membuat video presentasi dan mengedit poster', en: 'Enjoys creating video presentations and editing posters', jv: 'Gadhah kesenengan damel video presentasi lan nyunting poster' },
                projectsTitle: { id: 'Proyek Saya', en: 'My Projects', jv: 'Ayahan Kula' },
                proj1Title: { id: 'Perakitan Komputer', en: 'Computer Assembly', jv: 'Ngrakit Komputer' },
                proj1Desc: { id: 'Proyek pribadi untuk merakit sebuah PC dari awal dengan fokus pada performa dan estetika.', en: 'A personal project to build a PC from scratch, focusing on performance and aesthetics.', jv: 'Setunggaling ayahan pribadi kagem mbangun PC saking wiwitan, fokus dhateng performa lan kaendahan.' },
                proj2Title: { id: 'Jaringan Laboratorium Sekolah', en: 'School Laboratory Network', jv: 'Jaringan Laboratorium Sekolah' },
                proj2Desc: { id: 'Turut serta dalam konfigurasi dan pemecahan masalah jaringan di laboratorium komputer sekolah.', en: 'Participated in configuring and troubleshooting the network in the school\'s computer laboratory.', jv: 'Ngrehaken konfigurasi lan mrantasi prekawis jaringan wonten ing laboratorium komputer sekolah.' },
                proj3Title: { id: 'Desain Web Portofolio Interaktif', en: 'Interactive Portfolio Web Design', jv: 'Desain Web Portofolio Interaktif' },
                proj3Desc: { id: 'Proyek yang sedang Anda lihat saat ini. Dibangun menggunakan HTML, Tailwind CSS, dan Three.js.', en: 'The project you are looking at right now. Built with HTML, Tailwind CSS, and Three.js.', jv: 'Ayahan ingkang saweg panjenengan pirsani! Dipundamel ngagem HTML, Tailwind CSS, lan Three.js.' },
                proj4Title: { id: 'Proyek Visualisasi Matematika', en: 'Math Visualization Project', jv: 'Ayahan Visualisasi Matematika' },
                proj4Desc: { id: 'Sebuah halaman interaktif untuk memvisualisasikan berbagai konsep matematika. Akan terbuka di tab baru.', en: 'An interactive page to visualize various mathematical concepts. Opens in a new tab.', jv: 'Kaca interaktif kagem visualisasi konsep matematika. Kabikak ing tab enggal.' },
                modal1Title: { id: "Proyek Perakitan Komputer Gaming", en: "Gaming Computer Assembly Project", jv: "Proyek Perakitan Komputer Gaming" },
                modal1Desc: { id: "Proyek ini berfokus pada perakitan PC gaming dari awal. Setiap komponen, mulai dari prosesor hingga kartu grafis, dipilih secara saksama untuk mendapatkan performa maksimal sesuai anggaran. Manajemen kabel dan pencahayaan RGB juga menjadi fokus untuk menunjang nilai estetika.", en: "This project focuses on building a gaming PC from scratch. Each component, from the processor to the graphics card, was carefully selected to achieve maximum performance within the budget. Cable management and RGB lighting were also a focus to enhance aesthetics.", jv: "Ayahan menika fokus ing perakitan PC gaming saking wiwitan. Saben komponen, saking prosesor ngantos kertu grafis, dipunpilih kanthi tliti kagem pikantuk performa maksimal miturut anggaran. Manajemen kabel lan pepadhang RGB ugi dados fokus kagem njagi nilai kaendahan." },
                modal2Title: { id: "Proyek Konfigurasi Jaringan Laboratorium", en: "Laboratory Network Configuration Project", jv: "Proyek Konfigurasi Jaringan Laboratorium" },
                modal2Desc: { id: "Dalam proyek sekolah ini, saya bertanggung jawab merancang dan mengonfigurasi topologi jaringan untuk laboratorium komputer baru. Tugas ini mencakup pengaturan router, switch, serta memastikan setiap komputer dapat terhubung ke internet dan server lokal secara aman dan efisien.", en: "In this school project, I was responsible for designing and configuring the network topology for a new computer laboratory. This task included setting up routers, switches, and ensuring every computer could connect to the internet and local servers securely and efficiently.", jv: "Wonten ing ayahan sekolah menika, kula dipunparingi tanggel jawab ngrancang lan ngkonfigurasi topologi jaringan kagem laboratorium komputer enggal. Tugas menika kalebet ngatur router, switch, saha mesthekaken saben komputer saged nyambung dhateng internet lan server lokal kanthi aman lan efisien." },
                modal3Title: { id: "Proyek Website Portofolio Interaktif", en: "Interactive Portfolio Website Project", jv: "Proyek Website Portofolio Interaktif" },
                modal3Desc: { id: "Ini adalah proyek yang sedang Anda lihat saat ini. Sebuah portofolio pribadi yang saya bangun dari awal menggunakan HTML, Tailwind CSS untuk gaya modern, dan Three.js untuk menciptakan semua efek 3D yang interaktif, termasuk latar belakang visualnya.", en: "This is the project you are currently viewing. A personal portfolio that I built from scratch using HTML, Tailwind CSS for modern styling, and Three.js to create all the interactive 3D effects, including its visual background.", jv: "Menika ayahan ingkang saweg panjenengan pirsani. Setunggaling portofolio pribadi ingkang kula bangun saking wiwitan ngagem HTML, Tailwind CSS kagem gaya modern, lan Three.js kagem ngripta sedaya efek 3D ingkang interaktif, kalebet latar wingking visualipun." },
                contactTitle: { id: 'Animasi 3D', en: '3D Animation', jv: 'Animasi 3D' },
                contactDesc: { id: 'Halaman ini sedang dalam pengembangan', en: 'This page is under development', jv: 'Kaca menika saweg dipunbangun' },
                footerQuote: { id: '“Sesungguhnya Allah tidak akan mengubah keadaan suatu kaum sebelum mereka mengubah keadaan diri mereka sendiri”', en: '"Indeed, Allah will not change the condition of a people until they change what is in themselves"', jv: '"Saktemene Allah ora bakal ngowahi kahanane sawijining kaum sadurunge dheweke ngowahi kahanan kang ana ing awake dhewe"' },
                footerCite: { id: '— QS Ar-Ra’d: 11', en: '— QS Ar-Ra’d: 11', jv: '— QS Ar-Ra’d: 11' },
                langModalTitle: { id: 'Pilih Bahasa', en: 'Select Language', jv: 'Mugi Pilih Basa' }
            }
        };

        // --- INISIALISASI & KONFIGURASI APLIKASI ---
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- VARIABEL GLOBAL & PENGAMBILAN ELEMEN ---
            const state = {
                currentLang: 'id',
                activeViewKey: 'hero'
            };

            const ui = {
                langSwitcherBtn: document.getElementById('lang-switcher-btn'),
                langModal: document.getElementById('lang-modal'),
                langSelectId: document.getElementById('lang-select-id'),
                langSelectEn: document.getElementById('lang-select-en'),
                langSelectJv: document.getElementById('lang-select-jv'),
                hamburgerButton: document.getElementById('hamburger-button'),
                mobileMenu: document.getElementById('mobile-menu'),
                projectGrid: document.getElementById('project-grid'),
                projectModal: document.getElementById('project-modal'),
                modalCloseBtn: document.getElementById('modal-close-btn'),
                modalTitle: document.getElementById('modal-title'),
                modalMedia: document.getElementById('modal-media'),
                modalDesc: document.getElementById('modal-desc'),
                views: {
                    hero: document.getElementById('home-view'),
                    about: document.getElementById('about-section'),
                    project: document.getElementById('project-section'),
                    contact: document.getElementById('contact-section')
                },
                allNavLinks: document.querySelectorAll('header a[href^="#"], #mobile-menu a[href^="#"]'),
                adventureButton: document.querySelector('a[href="#timeline-section"]'),
                timelineSection: document.getElementById('timeline-section'),
                contentWrapper: document.querySelector('.content-wrapper')
            };

            // --- FUNGSI UTAMA ---

            // Fungsi untuk mengatur bahasa
            const setLanguage = (lang) => {
                state.currentLang = lang;
                document.documentElement.lang = lang;
                ui.langSwitcherBtn.textContent = lang.toUpperCase();

                const { translations } = appData;
                document.querySelectorAll('[data-translate-key]').forEach(el => {
                    const key = el.dataset.translateKey;
                    if (translations[key]?.[lang]) {
                        el.innerHTML = translations[key][lang];
                    }
                });
                
                if (translations.pageTitle?.[lang]) {
                    document.title = translations.pageTitle[lang];
                }
                
                renderProjects();
            };

            // Fungsi untuk membuat dan menampilkan kartu proyek
            const renderProjects = () => {
                ui.projectGrid.innerHTML = '';
                const { projects, translations } = appData;
                projects.forEach(project => {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'project-card-wrapper';
                    
                    const titleKey = `${project.id}Title`;
                    const descKey = `${project.id}Desc`;
                    
                    let externalLinkIcon = '';
                    if (project.isExternal) {
                        wrapper.dataset.url = project.externalUrl;
                        externalLinkIcon = `<i class="fas fa-external-link-alt absolute top-4 right-4 text-white/50"></i>`;
                    } else {
                        wrapper.dataset.modalImg = project.modalImg;
                        wrapper.dataset.videoUrl = project.videoUrl;
                    }

                    wrapper.innerHTML = `
                        <div class="project-card bg-gray-800/60 backdrop-blur-sm rounded-lg overflow-hidden relative">
                            ${externalLinkIcon}
                            <img src="${project.img}" alt="${translations[titleKey][state.currentLang]}" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-cyan-400 mb-2">${translations[titleKey][state.currentLang]}</h3>
                                <p class="text-gray-300 text-sm">${translations[descKey][state.currentLang]}</p>
                            </div>
                        </div>
                    `;
                    ui.projectGrid.appendChild(wrapper);
                });
                addProjectCardListeners();
            };
            
            // --- FUNGSI UNTUK MODAL & NAVIGASI ---

            const toggleMenu = () => {
                const isOpen = ui.hamburgerButton.getAttribute('aria-expanded') === 'true';
                ui.hamburgerButton.classList.toggle('open');
                ui.mobileMenu.classList.toggle('hidden');
                ui.mobileMenu.classList.toggle('flex');
                ui.hamburgerButton.setAttribute('aria-expanded', !isOpen);
            };

            const switchView = (targetViewKey) => {
                if (targetViewKey === state.activeViewKey) return;
                
                const currentView = ui.views[state.activeViewKey];
                const targetView = ui.views[targetViewKey];
                
                if (!targetView) {
                    console.error(`View with key "${targetViewKey}" not found.`);
                    return;
                }

                state.activeViewKey = targetViewKey;
                ui.contentWrapper.scrollTop = 0;

                if (currentView) {
                    currentView.classList.add('fade-out');
                    currentView.addEventListener('animationend', () => {
                        currentView.classList.add('hidden');
                        currentView.classList.remove('fade-out', 'flex');
                    }, { once: true });
                }

                 setTimeout(() => {
                    targetView.classList.remove('hidden');
                    if (['about', 'project', 'contact'].includes(targetViewKey)) {
                        targetView.classList.add('flex');
                    }
                    targetView.classList.add('fade-in');
                    targetView.addEventListener('animationend', () => targetView.classList.remove('fade-in'), { once: true });
                    
                    const contentBox = targetView.querySelector('.content-entry-box');
                    if(contentBox) setTimeout(() => contentBox.classList.add('visible'), 100);
                    if(targetViewKey === 'project') setTimeout(() => ui.projectGrid.classList.add('visible'), 100);

                }, 300);
            };
            
            const openModal = (modalElement) => {
                modalElement.classList.remove('hidden');
                modalElement.classList.add('modal-enter');
                modalElement.classList.remove('modal-leave');
            };

            const closeModal = (modalElement) => {
                modalElement.classList.add('modal-leave');
                modalElement.classList.remove('modal-enter');
                modalElement.addEventListener('animationend', () => {
                    modalElement.classList.add('hidden');
                    if(modalElement.id === 'project-modal') ui.modalMedia.innerHTML = '';
                }, { once: true });
            };

            // --- EVENT LISTENERS ---

            function addProjectCardListeners() {
                const allProjectCards = document.querySelectorAll('.project-card-wrapper');
                const projectSectionEl = document.getElementById('project-section');

                allProjectCards.forEach(wrapper => {
                    if (wrapper.dataset.url) { 
                        wrapper.addEventListener('click', () => {
                            window.open(wrapper.dataset.url, '_blank');
                        });
                    } else {
                        wrapper.addEventListener('click', () => {
                             const isFocused = wrapper.classList.contains('focused');
                             if (isFocused) {
                                const projectId = wrapper.querySelector('h3').textContent;
                                const projectData = appData.projects.find(p => appData.translations[`${p.id}Title`][state.currentLang] === projectId);
                                
                                if(projectData) {
                                    const modalTitleKey = `${projectData.id}Title`;
                                    const modalDescKey = `${projectData.id}Desc`;
                                    
                                    ui.modalTitle.textContent = appData.translations[modalTitleKey][state.currentLang];
                                    ui.modalDesc.textContent = appData.translations[modalDescKey][state.currentLang];
                                    
                                    if (projectData.videoUrl) {
                                        ui.modalMedia.innerHTML = `<video src="${projectData.videoUrl}" class="w-full h-full" controls autoplay loop muted></video>`;
                                    } else if (projectData.modalImg) {
                                        ui.modalMedia.innerHTML = `<img src="${projectData.modalImg}" alt="${ui.modalTitle.textContent}" class="w-full h-full object-cover">`;
                                    }
                                    openModal(ui.projectModal);
                                }
                            } else {
                                allProjectCards.forEach(w => w.classList.remove('focused'));
                                wrapper.classList.add('focused');
                                projectSectionEl.classList.add('has-focus');
                            }
                        });
                    }
                });

                 document.querySelectorAll('.project-card').forEach((card) => {
                    card.addEventListener('mousemove', (e) => {
                        const rect = card.getBoundingClientRect();
                        const x = e.clientX - rect.left, y = e.clientY - rect.top;
                        const centerX = rect.width / 2, centerY = rect.height / 2;
                        const maxRotate = 15;
                        const rotateX = (maxRotate * (y - centerY)) / centerY;
                        const rotateY = (-maxRotate * (x - centerX)) / centerX;
                        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                        card.style.setProperty('--mouse-x', `${x}px`);
                        card.style.setProperty('--mouse-y', `${y}px`);
                        card.style.setProperty('--glare-opacity', '1');
                    });
                    card.addEventListener('mouseleave', () => {
                        card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0)';
                        card.style.setProperty('--glare-opacity', '0');
                    });
                });
                
                document.addEventListener('click', (e) => {
                    if (!projectSectionEl.contains(e.target)) {
                         allProjectCards.forEach(w => w.classList.remove('focused'));
                         projectSectionEl.classList.remove('has-focus');
                    }
                });
            }

            ui.langSwitcherBtn.addEventListener('click', () => openModal(ui.langModal));
            ui.langModal.addEventListener('click', (e) => { if (e.target === ui.langModal) closeModal(ui.langModal); });
            ui.langSelectId.addEventListener('click', () => { setLanguage('id'); closeModal(ui.langModal); });
            ui.langSelectEn.addEventListener('click', () => { setLanguage('en'); closeModal(ui.langModal); });
            ui.langSelectJv.addEventListener('click', () => { setLanguage('jv'); closeModal(ui.langModal); });
            
            ui.modalCloseBtn.addEventListener('click', () => closeModal(ui.projectModal));
            ui.projectModal.addEventListener('click', (e) => { if (e.target === ui.projectModal) closeModal(ui.projectModal); });

            ui.hamburgerButton.addEventListener('click', toggleMenu);
            
            document.querySelectorAll('.mobile-link').forEach(link => {
                link.addEventListener('click', () => {
                    if (ui.hamburgerButton.classList.contains('open')) {
                        toggleMenu();
                    }
                });
            });

            ui.allNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const href = link.getAttribute('href');
                    if (href.startsWith('#')) {
                        e.preventDefault();
                        const targetKey = href.replace('-section', '').substring(1);
                        switchView(targetKey);
                    }
                });
            });

            ui.adventureButton.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelector('.content-wrapper').scrollTo({
                    top: ui.timelineSection.offsetTop,
                    behavior: 'smooth'
                });
            });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));
            
            // --- INISIALISASI AWAL ---
            setLanguage(state.currentLang); 
            init3DBackground();
            initSnakeAnimation();
        });


        // --- Skrip untuk Animasi Latar Belakang 3D ---
        let scene, camera, renderer, icosahedron, particles;
        const mouse3D = { x: 0, y: 0 };
        const bgClock = new THREE.Clock();
        
        function init3DBackground() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            const material = new THREE.LineBasicMaterial({ color: 0x00ddff });
            const geometry = new THREE.IcosahedronGeometry(2.2, 0); 
            const wireframe = new THREE.EdgesGeometry(geometry);
            icosahedron = new THREE.LineSegments(wireframe, material);
            scene.add(icosahedron);
            
            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCount = 5000;
            const posArray = new Float32Array(particlesCount * 3);
            for (let i = 0; i < particlesCount * 3; i++) posArray[i] = (Math.random() - 0.5) * 40;
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const particlesMaterial = new THREE.PointsMaterial({ size: 0.015, color: 0xffffff });
            particles = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particles);

            animate3DBackground();
        }

        function animate3DBackground() {
            requestAnimationFrame(animate3DBackground);
            
            if (icosahedron) {
                icosahedron.rotation.x += 0.001;
                icosahedron.rotation.y += 0.0015;
            }
            particles.rotation.y += 0.0002;

            camera.position.x += (mouse3D.x * 1.5 - camera.position.x) * 0.02;
            camera.position.y += (-mouse3D.y * 1.5 - camera.position.y) * 0.02;
            camera.lookAt(scene.position);
            renderer.render(scene, camera);
        }

        // --- Skrip Animasi Ular ---
        function initSnakeAnimation() {
            const canvas = document.getElementById('snake-canvas');
            const ctx = canvas.getContext('2d');
            let width = canvas.width = window.innerWidth;
            let height = canvas.height = window.innerHeight;
            let time = 0;

            const mouse = { x: width / 2, y: height / 2 };
            const customCursorEl = document.querySelector('.custom-cursor');

            function updateMousePosition(e) {
                const rect = canvas.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;

                mouse.x = clientX - rect.left;
                mouse.y = clientY - rect.top;
                
                mouse3D.x = (clientX / window.innerWidth) * 2 - 1;
                mouse3D.y = -(clientY / window.innerHeight) * 2 + 1;
                customCursorEl.style.left = `${clientX}px`;
                customCursorEl.style.top = `${clientY}px`;
            }

            window.addEventListener('mousemove', updateMousePosition);
            window.addEventListener('touchmove', (e) => {
                e.preventDefault(); 
                updateMousePosition(e);
            }, { passive: false });
            window.addEventListener('touchstart', updateMousePosition);

            window.addEventListener('resize', () => {
                width = canvas.width = window.innerWidth;
                height = canvas.height = window.innerHeight;
            });

            const numSegments = 80;
            const segmentLength = 7;
            const easing = 0.12; 
            const segments = [];

            for (let i = 0; i < numSegments; i++) {
                segments.push({ x: width / 2, y: height / 2, angle: 0 });
            }

            function animateSnake() {
                time += 0.05;
                ctx.clearRect(0, 0, width, height);

                const head = segments[0];
                const dx = mouse.x - head.x;
                const dy = mouse.y - head.y;
                
                head.angle = Math.atan2(dy, dx);
                head.x += dx * easing;
                head.y += dy * easing;

                for (let i = 1; i < numSegments; i++) {
                    const prev = segments[i - 1];
                    const current = segments[i];
                    const currentAngle = Math.atan2(prev.y - current.y, prev.x - current.x);
                    current.angle = currentAngle;
                    current.x = prev.x - Math.cos(currentAngle) * segmentLength;
                    current.y = prev.y - Math.sin(currentAngle) * segmentLength;
                }
                
                drawSnake();
                requestAnimationFrame(animateSnake);
            }

            function drawSnake() {
                const head = segments[0];
                const tail = segments[numSegments - 1];
                const gradient = ctx.createLinearGradient(head.x, head.y, tail.x, tail.y);
                gradient.addColorStop(0, 'rgba(0, 221, 255, 0.8)');
                gradient.addColorStop(0.5, 'rgba(255, 0, 255, 0.5)');
                gradient.addColorStop(1, 'rgba(255, 0, 255, 0)');
                
                ctx.strokeStyle = gradient;
                ctx.lineWidth = 2;
                ctx.shadowColor = 'rgba(0, 221, 255, 0.5)';
                ctx.shadowBlur = 10;


                for (let i = 1; i < numSegments; i++) {
                    const s1 = segments[i - 1];
                    const s2 = segments[i];
                    ctx.beginPath();
                    ctx.moveTo(s1.x, s1.y);
                    ctx.lineTo(s2.x, s2.y);
                    ctx.stroke();

                    const scale = 1 - (i / numSegments);
                    if (i % 4 === 0 && i > 5 && i < numSegments * 0.9) {
                        const pulse = (Math.sin(time - i * 0.1) * 0.5 + 0.5);
                        const ribLength = (8 + pulse * 4) * scale;
                        const angle = s2.angle + Math.PI / 2;
                        ctx.beginPath();
                        ctx.moveTo(s2.x, s2.y);
                        ctx.lineTo(s2.x + Math.cos(angle) * ribLength, s2.y + Math.sin(angle) * ribLength);
                        ctx.moveTo(s2.x, s2.y);
                        ctx.lineTo(s2.x - Math.cos(angle) * ribLength, s2.y - Math.sin(angle) * ribLength);
                        ctx.stroke();
                    }
                }
                drawHead(segments[0]);
            }
            
            function drawHead(head) {
                ctx.save();
                ctx.translate(head.x, head.y);
                ctx.rotate(head.angle);
                
                // Head Shape
                ctx.beginPath();
                ctx.moveTo(15, 0);
                ctx.quadraticCurveTo(5, -12, -15, 0);
                ctx.quadraticCurveTo(5, 12, 15, 0);
                ctx.closePath();
                
                ctx.fillStyle = 'rgba(200, 240, 255, 0.2)';
                ctx.strokeStyle = 'rgba(0, 221, 255, 1)';
                ctx.lineWidth = 1.5;
                ctx.shadowColor = 'cyan';
                ctx.shadowBlur = 15;
                ctx.fill();
                ctx.stroke();

                // Eyes
                ctx.beginPath();
                ctx.arc(5, -3, 2, 0, Math.PI * 2);
                ctx.arc(5, 3, 2, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(150, 255, 255, 1)';
                ctx.shadowColor = 'cyan';
                ctx.shadowBlur = 20;
                ctx.fill();

                ctx.restore();
            }
            
            animateSnake();
        }

        // --- Global Event Listeners (hanya untuk resize 3D) ---
        function onWindowResize() {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            }
        }
       
        window.addEventListener('resize', onWindowResize, false);

    </script>
</body>
</html>

